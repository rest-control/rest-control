#!/usr/bin/env php
<?php

$autoloadFiles = [
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../autoload.php',

    __DIR__ . '/../src/helpers.php',
    __DIR__ . '/../rest-control/rest-control/src/helpers.php',
];

$loader = null;

foreach($autoloadFiles as $autoloadFile) {
    if(file_exists($autoloadFile)) {
        $loader = require_once $autoloadFile;
    }
}

if(!$loader) {
    throw new \Exception('Cannot find autoload.php. Please install dependencies via composer.');
}

try{
    $console = new \RestControl\Console\Console($loader);
    exit($console->run());
} catch (\Exception $e) {
    echo $e->getMessage() . "\n";
    exit(1);
}